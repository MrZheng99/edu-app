CREATE TABLE StuPersonInfo
(
	StuId CHAR(11) NOT NULL,
	stuName VARCHAR(30) NOT NULL,
	StuSex VARCHAR(1) NOT NULL,
	StuAge TINYINT NOT NULL,
	StuBirthday DATE,
	StuPhoneNumber CHAR(11) NOT NULL,
	StuQQ VARCHAR(11),
	StuAddress VARCHAR(50),
	StuClass VARCHAR(30),
	StuCourse VARCHAR(50),
	StuPractice VARCHAR(1024)
)
CREATE TABLE TeaPersonInfo
(
	TeaId CHAR(11) NOT NULL,
	TeaName VARCHAR(30) NOT NULL,
	TeaSex VARCHAR(1) NOT NULL,
	TeaAge TINYINT NOT NULL,
	TeaBirthday DATE,
	TeaPhoneNumber CHAR(11) NOT NULL,
	TeaQQ VARCHAR(11),
	TeaAddress VARCHAR(50),
	TeaClass VARCHAR(30),
	TeaCourse VARCHAR(50),
	TeaPractice VARCHAR(1024)
)
CREATE TABLE CLASS(
	ClassId CHAR(10) NOT NULL,
	Teacher VARCHAR(100) NOT NULL,
	Student VARCHAR(1024) NOT NULL
)

CREATE TABLE COURSE(
	CourseId CHAR(2) NOT NULL,
	Class VARCHAR(100) NOT NULL,
	Teacher VARCHAR(11) NOT NULL,
	Practice TEXT 
)
CREATE TABLE PRACTICE(
	PracticeId VARCHAR(50) NOT NULL,
	ExamDetail TEXT NOT NULL
)
CREATE TABLE SCORE(
	PracticeId VARCHAR(50) NOT NULL,
	StuId CHAR(11) NOT NULL,
	StuScore TINYINT NOT NULL,
	FullScore TINYINT NOT NULL,
	ScoreDetail TEXT NOT NULL
)
-- 添加约束
ALTER TABLE StuPersonInfo add Constraint PK_StuPersonInfo_StuId primary key(StuId)
-- 电话唯一约束
ALTER TABLE StuPersonInfo add UNIQUE(StuPhoneNumber)
-- 男女检查约束
ALTER TABLE StuPersonInfo add Constraint CK_StuPersonInfo_StuSex CHECK(StuSex IN ('男','女'))
-- 学生年龄约束
ALTER TABLE StuPersonInfo add Constraint CK_StuPersonInfo_StuAge CHECK(StuAge>0 AND StuAge<18)


ALTER TABLE TeaPersonInfo add Constraint PK_TeaPersonInfo_TeaId primary key(TeaId)
ALTER TABLE TeaPersonInfo add UNIQUE(TeaPhoneNumber)
ALTER TABLE TeaPersonInfo add Constraint CK_TeaPersonInfo_TeaSex CHECK(TeaSex IN ('男','女'))
ALTER TABLE TeaPersonInfo add Constraint CK_TeaPersonInfo_TeaAge CHECK(TeaAge>0 AND TeaAge<70)


ALTER TABLE CLASS add Constraint PK_CLASS_ClassId primary key(ClassId)


ALTER TABLE COURSE add Constraint PK_COURSE_CourseId primary key(CourseId)
-- 设置老师id为课程外键
ALTER TABLE COURSE add Constraint FK_COURSE_Teacher FOREIGN KEY(Teacher) REFERENCES TeaPersonInfo(TeaId)
-- practice主键
ALTER TABLE PRACTICE add Constraint PK_PRACTICE_PracticeId primary key(PracticeId)
-- 约束成绩
ALTER TABLE SCORE add Constraint CK_SCORE_Score CHECK(StuScore<FullScore AND StuScore>=0 AND FullScore>0)
-- 联合主键
ALTER TABLE SCORE add Constraint PK_SCORE_PracticeAndStuId primary key(PracticeId,StuId)


